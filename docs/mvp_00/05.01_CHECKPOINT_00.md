# Checkpoint 00: Shipable PoC Plan (Epics 1–4 baseline)

Purpose: enumerate the concrete work needed to turn the current Epic 4 codebase into a working Linux console AI coding agent that meets the MVP_00 specification and is suitable for beta testing by real users. Each step is intentionally small and testable.

## Implementation Steps (sequential checklist)
[x] Wire CLI entrypoints: add `lincona tui` (default), `lincona tool <name>`, `lincona sessions <list|show|rm>`, and `lincona config <print|path>`; honor flags for model/reasoning/fs_mode/approval/log_level and `--debug [FILE]`.
[ ] Conversation/session manager: maintain state (model, reasoning_effort, fs_mode, approval_policy, session id), assemble OpenAI requests with tool specs, and stream events into JSONL and log files.
[ ] Slash commands: parse and apply `/newsession`, `/model`, `/reasoning`, `/approvals`, `/fsmode`, `/help`, `/quit`, emitting user-friendly feedback and persisting the resulting state.
[ ] TUI (Textual/Rich): chat pane with streamed tokens, side pane for tool calls (start/progress/output/truncation), status bar (model, reasoning, fs_mode, approval, session id), input box with multiline/history, and session picker/resume flow.
[ ] Tool routing integration: connect TUI and conversation manager to `ToolRouter`, share a single `PtyManager`, enforce fs boundaries/approvals, and surface tool-call errors/truncation markers in the UI.
[ ] Persistence robustness: ensure session JSONL writes are fsync’d periodically, logs truncate/rotate per spec, and shutdown path closes writers/PT Ys on Ctrl+C/SIGTERM.
[ ] Config precedence: load settings with CLI > env > config file > defaults, allow `LINCONA_HOME` override for paths, and provide helpful error when `OPENAI_API_KEY` is missing.
[ ] Standalone tool CLI parity: expose list_dir/read_file/grep_files/apply_patch_json/apply_patch_freeform/shell/exec_command/write_stdin with argparse flags and `--json` payloads; enforce fs_mode/approval and clear exit codes.
[ ] Safety/ergonomics: reject apply_patch deletes of binary files and unsafe workdirs; add cumulative truncation markers for PTY; consistent timeout/approval error objects across tools.
[ ] E2E flows: add mocked end-to-end tests covering chat + tool call + slash command + session resume; add a real-network smoke path guarded by `OPENAI_API_KEY` env and skip by default in CI.
[ ] Quality gates: keep per-file coverage ≥90%, mypy strict on `src/`, ruff/black/isort, and ensure `make ci` runs green locally and in CI.
[ ] Docs/readiness: refresh README/ARCHITECTURE with real CLI/TUI instructions, describe fs boundary/approval behaviors, add a quick “beta smoke checklist,” and note any intentional deviations from the spec.
[ ] Packaging: verify Poetry console_script entry, produce Docker image with runtime entrypoint `lincona tui`, and document how to pass API key and mount workspace.
